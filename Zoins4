-- -- [[ Zoins Hub - النسخة المصلحة بالكامل ]] --

local UserInputService = game:GetService("UserInputService")
local UIS = UserInputService
local IsMobile = UIS.TouchEnabled and not UIS.KeyboardEnabled
local IsPC = UIS.KeyboardEnabled and UIS.MouseEnabled
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- ===================================
-- نظام الإشعارات المخصص (ذهبي وأسود)
-- ===================================
local function ShowNotification(text)
    local NotifyGui = game:GetService("CoreGui"):FindFirstChild("ZoinsNotification")
    if not NotifyGui then
        NotifyGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
        NotifyGui.Name = "ZoinsNotification"
        NotifyGui.DisplayOrder = 999
    end

    local NotifyFrame = Instance.new("Frame", NotifyGui)
    NotifyFrame.Size = UDim2.new(0, 250, 0, 60)
    NotifyFrame.Position = UDim2.new(1, 10, 0, 20) -- تبدأ خارج الشاشة من اليمين
    NotifyFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    NotifyFrame.BorderSizePixel = 0
    
    local Corner = Instance.new("UICorner", NotifyFrame)
    Corner.CornerRadius = UDim.new(0, 10)
    
    local Stroke = Instance.new("UIStroke", NotifyFrame)
    Stroke.Thickness = 2
    Stroke.Color = Color3.fromRGB(218, 165, 32) -- لون ذهبي
    
    local Label = Instance.new("TextLabel", NotifyFrame)
    Label.Size = UDim2.new(1, -10, 1, -10)
    Label.Position = UDim2.new(0, 5, 0, 5)
    Label.BackgroundTransparency = 1
    Label.Text = text
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.TextSize = 14
    Label.Font = Enum.Font.GothamBold
    Label.TextWrapped = true

    -- حركة الظهور (Animation)
    NotifyFrame:TweenPosition(UDim2.new(1, -260, 0, 20), "Out", "Back", 0.5, true)
    
    task.delay(4, function()
        NotifyFrame:TweenPosition(UDim2.new(1, 10, 0, 20), "In", "Back", 0.5, true)
        task.wait(0.5)
        NotifyFrame:Destroy()
    end)
end

-- ===============================
-- Anti Lag / Delay Protection
-- ===============================
local function AntiLagWrap(func)
    task.spawn(function()
        RunService.Heartbeat:Wait()
        local ok, err = pcall(func)
        if not ok then warn("Zoins Hub | Script Error:", err) end
        task.delay(0.2, function()
            if collectgarbage then collectgarbage("step", 200) end
        end)
    end)
end

-- ===================================
-- دالة السحب المطورة (Smooth Dragging)
-- ===================================
function MakeDraggable(gui)
    local dragging = false
    local dragStart, startPos, dragInput
    local moved = false

    gui.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            moved = false
            dragStart = input.Position
            startPos = gui.Position
            dragInput = input
        end
    end)

    UIS.InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            local delta = input.Position - dragStart
            if math.abs(delta.X) > 2 or math.abs(delta.Y) > 2 then moved = true end
            gui.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    UIS.InputEnded:Connect(function(input) if input == dragInput then dragging = false end end)
    return function() return moved end
end

-- ===================================
-- Zoins V5 - Gold Edition Function
-- ===================================
local function LoadGoldEdition()
    local ScreenGui = Instance.new("ScreenGui")
    local MainFrameG = Instance.new("Frame")
    local UICorner_Main = Instance.new("UICorner")
    local UIStroke_Main = Instance.new("UIStroke")
    local Title = Instance.new("TextLabel")
    local UIGradient_Title = Instance.new("UIGradient")
    local ContentFrame = Instance.new("ScrollingFrame")
    local CloseBtnG = Instance.new("TextButton")
    local MiniBtn = Instance.new("TextButton")
    local MiniCorner = Instance.new("UICorner")
    local MiniStroke = Instance.new("UIStroke")
    local MiniGradient = Instance.new("UIGradient")
    local MiniLabel = Instance.new("TextLabel")

    ScreenGui.Parent = game.CoreGui
    ScreenGui.Name = "Zoins_V5_Updated"
    ScreenGui.DisplayOrder = 1 

    MainFrameG.Name = "MainFrame"
    MainFrameG.Parent = ScreenGui
    MainFrameG.BackgroundColor3 = Color3.fromRGB(12, 12, 14)
    MainFrameG.Position = UDim2.new(0.5, -140, 0.4, -200) 
    MainFrameG.Size = UDim2.new(0, 280, 0, 420)
    MainFrameG.Active = true
    MainFrameG.Draggable = true
    MainFrameG.Visible = true

    UICorner_Main.CornerRadius = UDim.new(0, 20)
    UICorner_Main.Parent = MainFrameG
    UIStroke_Main.Thickness = 2.5
    UIStroke_Main.Parent = MainFrameG
    UIStroke_Main.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    UIStroke_Main.Color = Color3.fromR
